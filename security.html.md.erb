---
title: Cloud Foundry security
owner: Security
---

<%<!--฿ The first header must be ## -- no smaller, no larger. ฿--># Reset page title based on product title %>
<% if vars.platform_code != 'CF' %>

<% set_title(vars.app_runtime_abbr, "Security") %>

<% end %>

This topic provides you with an overview of <%= vars.app_runtime_first %> security.
For an overview of container security, see [Container Security](container-security.html).

<%= vars.app_runtime_abbr %> implements the following measures to mitigate against security threats:

* Minimizes network surface area
* Isolates customer<!--฿ The intended reader is a VMware customer: |you| is better than addressing the reader in 3rd person. ฿--> apps and data in containers
* Encrypts connections
* Uses role-based access controls, applying and enforcing<!--฿ Insert the Oxford comma if it is missing here. ฿--> roles and per<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->missions to ensure that users can only view and affect<!--฿ Consider using a more precise verb. ฿--> the spaces for which they have been<!--฿ Consider replacing with |were| or shifting to present tense. ฿--> granted access
* Ensures security of app bits in a multi-tenant environment
* Prevents possible denial of service attacks through resource starvation


## <a id='system-boundaries'></a> System boundaries and access

In a typical deployment of <%= vars.app_runtime_abbr %>, the components run on virtual machine<!--฿ Use |VM| after spelling it out fully as |virtual machine| at first use. Do not use the lowercase |vm| abbreviation. In tables and figures, use |VM| to save space, even at first use. If a UI element includes |VM|, match the item name as it appears in the interface. ฿-->s (VMs) that exist within a VLAN.

In this configuration, the only access points visible on a public network are a load balancer that maps to one or more <%= vars.app_runtime_abbr %> routers and, optionally<!--฿ Our style is (Optional) INSTRUCTION -- as a procedure header or a step. ฿-->, a NAT VM and a jumpbox. Because of the limited number of contact points with the public internet<!--฿ |Internet| is preferred. Do not use |Net| or |net|. ฿-->, the surface area for possible security vulnerabilities is minimized.

As the following diagram shows the architecture of a typical deployment of <%= vars.app_runtime_abbr %>:

<p class="note important">
<span class="note__title">Important</span> 
<%= vars.company_name %> recommends that you also install a NAT VM for outbound requests and a
jumpbox to access the BOSH Director, though these access points are optional depending on your network
configuration.
</p>

  <%= image_tag("./images/security/sysbound1.png", :alt => "") %>

The above<!--฿ If referring to a page location, use |earlier| or, better, just use an anchor. If referring to product versions, use |later|. ฿--> diagram shows the following components:

- DMZ
  - Customer<!--฿ The intended reader is a VMware customer: |You| is better than addressing the reader in 3rd person. ฿--> Load Balancers with SSL Termination
  - Outbound NAT
  - Jumpbox
- Private vLANs
  - Cloud Foundry vLAN
    - Three Go Routers
    - OAuth2 Server (UAA)
    - Login Server
    - Cloud Controller
    - nsync
    - Diego Brain
    - Cell Reps
    - Blob Store
    - App Execution (Diego Cells) with Garden Containers
    - Service Brokers
    - BBS (HTTP/S)
    - Consul
    - NATS Message Bus
    - Metrics Collector
    - App Log Aggregator
  - BOSH vLAN
    - BOSH Director
    - Resurrector
    - Workers
    -Message Bus (NATS)
  - Services vLAN
    - Brokers
    - Services Nodes
- IaaS
  - Hyper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->visor

The diagram above<!--฿ If referring to a page location, use |earlier| or, better, just use an anchor. If referring to product versions, use |later|. ฿--> shows the following communications:

- Customer<!--฿ The intended reader is a VMware customer: |You| is better than addressing the reader in 3rd person. ฿--> Load Balancers send communication to the three Go Routers

- Outbound NAT communicates with Hyper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->visor

- BOSH Director communicates with the App Execution (Diego Cells)

- Service Brokers in Cloud Foundry vLAN communicates with Brokers in Services vLAN


### <a id='protocols'></a> Protocols

All traffic from the public internet<!--฿ |Internet| is preferred. Do not use |Net| or |net|. ฿--> to the Cloud Controller and UAA happens over HTTPS. Inside the boundary of the system, components communicate over a publish-subscribe (pub-sub) message bus NATS, HTTP, and SSL/TLS.

### <a id='bosh'></a> BOSH

Oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators deploy <%= vars.app_runtime_abbr %> with BOSH. The BOSH Director is the core orchestrating component in BOSH: it controls VM creation and deployment, as well as<!--฿ |and| is preferred. ฿--> other software and service lifecycle<!--฿ |life cycle| is preferred, but use |lifecycle| when it is used in the UI or is part of an approved product name. ฿--> events. You use HTTPS to ensure<!--฿ Remember to include |that| if introducing a restrictive clause. In prerequisites, use |verify that| instead of |ensure that|. Where possible just re-phrase: |Do x| is better than |Ensure that you do x|. ฿--> secure communication to the BOSH Director.

<%= vars.company_name %> recommends that you deploy the BOSH Director on a subnet that is not publicly accessible, and access the BOSH Director from a jumpbox on the subnet or through VPN.

BOSH includes the following functionality<!--฿ |function|, |features|, or |capability| is preferred. ฿--> for security:

* Communicates with the VMs it launches<!--฿ |starts| or |runs| is preferred. ฿--> over NATS. Because NATS cannot be accessed from outside <%= vars.app_runtime_abbr %>, this ensures that published messages can only originate from a component within your deployment.

* Provides an audit trail through the `bosh tasks --all` and `bosh tasks --recent=VALUE` commands. `bosh tasks --all` returns a table that shows all BOSH actions taken by an oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ator or other running processes. `bosh tasks --recent=VALUE` returns a table of recent tasks, with `VALUE` being the number of recent tasks you want to view.

* Allows you to set up individual login accounts for each<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿--> oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ator. BOSH oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators have root access.



<p class="note important">
<span class="note__title">Important</span>
BOSH does not encrypt data stored on BOSH VMs. Your IaaS might encrypt this data.
</p>

<p class="note important">
<span class="note__title">Important</span> 
BOSH does not encrypt data stored on BOSH VMs. Your IaaS might encrypt this data.
</p>


## <a id='isolation-segments'></a> Isolation segments

Isolation segments provide dedicated pools of resources to which apps can be<!--฿ Consider switching to active voice. ฿--> deployed to isolate workloads. Using isolation segments separates app resources as completely as if they were in different <%= vars.app_runtime_abbr %> deployments but avoids redundant management components and unneeded network complexity.

You can designate isolation segments for exclusive use by orgs and spaces within <%= vars.app_runtime_abbr %>. This guarantees that apps within the org or space use resources that are not also used by other orgs or spaces. For more information, see [Orgs, Spaces, Roles, and Permissions](./roles.html).

Customers<!--฿ The intended reader is a VMware customer: |You| is better than addressing the reader in 3rd person. ฿--> can use isolation segments for different reasons, including:

* To follow regulatory restrictions that require separation between different types of apps. For example, a health care company might not be able to<!--฿ |can| is preferred. ฿--> host medical records and billing systems on the same machines.

* To dedicate specific hardware to different isolation segments. For example, to ensure that high-priority apps run on a cluster of high-per<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->formance hosts.

* To separate data on multiple clients, to strengthen a security story, or offer different hosting tiers.

In <%= vars.app_runtime_abbr %>, the Cloud Controller database (CCDB) identifies isolation segments by name and GUID, for example <!--฿ Consider adding a comma after |for example|. ฿-->`30dd879c-ee2f-11db-8314-0800200c9a66`. The isolation segment object has no internal structure beyond these two proper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ties at the <%= vars.app_runtime_abbr %> level, but BOSH associates the name of the isolation segment with Diego Cells, through their `placement_tag` proper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ty.

This diagram shows how isolation segments keep apps running on different pools of Diego Cells, and how the Diego Cells communicate with each other and with the management components:

  <%= image_tag("images/security/isolation-segments.png", :alt => "Isolation segment diagram. For more information about Isolation Segments, see below.") %>

<%= vars.manage_iso_seg_link %>

For API commands related to isolation segments, see [Isolation Segments](http://v3-apidocs.cloudfoundry.org/version/3.0.0/index.html#isolation-segments) in the Cloud Controller API<!--฿ 1st use: |Cloud Foundry API (CAPI)|. Subsequent uses: |CAPI|. ฿--> (CAPI) Reference.


## <a id='auth'></a> Authentication and authorization

[User Account and Authentication](./architecture/uaa.html) (UAA) is the central identity management service for <%= vars.app_runtime_abbr %> and its various components.

UAA acts as an [OAuth2](https://oauth.net/2/) Authorization Server and issues access tokens for apps that request platform resources.
The tokens are based on the [JSON Web Token](http://jwt.io/) and are digitally signed by UAA.

Oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators can configure the identity store in UAA. If users register an account with the <%= vars.app_runtime_abbr %> platform, UAA acts as the user store and stores user passwords in the UAA database using [bcrypt](http://en.wikipedia.org/wiki/Bcrypt). UAA also supports connecting to external user stores through LDAP and SAML. Once<!--฿ Only use |once| when you mean |one time|, not when you mean |after|. ฿--> an oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ator has configured the external user store, such as a corporate Microsoft Active Directory, users can use their LDAP credentials to gain access to the <%= vars.app_runtime_abbr %> platform instead of registering a separate account. Alternatively, oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators can use SAML to connect to an external user store and enable single sign-on for users into the <%= vars.app_runtime_abbr %> platform.

Standard <%= vars.app_runtime_abbr %> deployments based on [cf-deployment](https://github.com/cloudfoundry/cf-deployment) provide a UAA client `cf` that can be<!--฿ Consider switching to active voice. ฿--> used to create OAuth 2 tokens using the Password Grant Flow for <%= vars.app_runtime_abbr %> users that are needed to access the CF <!--฿ |Cloud Foundry| is preferred. ฿-->API. This UAA client is also used by the CF CLI<!--฿ The brand name is shortened as |cf CLI|. ฿-->. The UAA client `cf` doesn't require a `client_secret`.

### <a id='rbac'></a> Managing user access with Role-Based Access Control

Apps that users deploy to <%= vars.app_runtime_abbr %> exist within a space. Spaces exist within orgs. To view and access an org or a space, a user must be a member of it. <%= vars.app_runtime_abbr %> uses role-based access control (RBAC), with each role granted per<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->missions to either an org or a specified space. For more information about roles and per<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->missions, see [Orgs, Spaces, Roles, and Permissions](roles.html).

<%= vars.console_links %>


## <a id='service-broker'></a> Security for service broker integration

The Cloud Controller authenticates every request with the Service Broker API using HTTP or HTTPS, depending on which protocol that you specify during broker registration. The Cloud Controller rejects any broker registration that does not contain a username<!--฿ |user name| is preferred. ฿--> and password.

Service instances bound to an app contain credential data. Users specify the binding credentials for user-provided service instances, while third-party brokers specify the binding credentials for managed service instances. The VCAP_SERVICES environment variable contains credential information for any service bound to an app. <%= vars.app_runtime_abbr %> constructs this value from encrypted data that it stores in the CCDB. For more information about user-provided service instances, see [User-Provided Service Instances](../devguide/services/user-provided.html).

The selected third-party broker controls how securely to communicate managed service credentials.

A third-party broker might offer a dashboard client in its catalog. Dashboard clients require a text string defined as a `client_secret`. <%= vars.app_runtime_abbr %> does not store this secret in the CCDB. Instead, <%= vars.app_runtime_abbr %> passes the secret to the UAA component for verification using HTTP or HTTPS.


## <a id='vuln-manage'></a> Managing software vulnerabilities

<%= vars.app_runtime_abbr %> manages software vulnerability using releases and BOSH stemcells. New <%= vars.app_runtime_abbr %> releases are created with updates to address code issues, while new stemcells are created with patches for the latest security fixes to address any underlying oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ating system issues.


## <a id='app-artifacts'></a> Ensuring security for app artifacts

<%= vars.app_runtime_abbr %> secures both the code and the configuration of an app using the following functionality<!--฿ |function|, |features|, or |capability| is preferred. ฿-->:

* App developer<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->s push their code using the <%= vars.app_runtime_abbr %> API. <%= vars.app_runtime_abbr %> secures each call to the <%= vars.app_runtime_abbr %> API using the [UAA](#auth) and SSL.

* The Cloud Controller uses [RBAC](#rbac) to ensure that only authorized users can access a particular app.

* The Cloud Controller stores the configuration for an app in an encrypted database table. This configuration data includes user-specified environment variables and service credentials for any services bound to the app.

* <%= vars.app_runtime_abbr %> runs the app inside a secure container. For more information, see [Container Security](./container-security.html).

* <%= vars.app_runtime_abbr %> oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators can configure network traffic rules to control inbound communication to and outbound communication from an app. For more information, see the [Network Traffic Rules](./container-security.html#config-traffic) section of the _Container Security_ topic.


## <a id='logging'></a> Security event logging and auditing

For oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators, <%= vars.app_runtime_abbr %> provides an audit trail through the `bosh tasks` command. This command shows all actions that an oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ator has taken with the platform. Additionally, oper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--><!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per<!--฿ Only use |per| to mean |for each|, not to mean |in accordance with|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ators can redirect <%= vars.app_runtime_abbr %> component logs to a standard syslog server using the `syslog_daemon_config` [proper<!--฿ |YAML| is preferred. ฿--><!--฿ Per<!--฿ Only use |per<!--฿ |YAML| is preferred. ฿-->| to mean <!--฿ |YAML| is preferred. ฿-->|for each<!--฿ |YAML| is preferred. ฿-->|, not to mean <!--฿ |YAML| is preferred. ฿-->|in accordance with<!--฿ |YAML| is preferred. ฿-->|. ฿--> YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ Per YAML.org, <!--฿ |YAML| is preferred. ฿-->|.yaml<!--฿ |YAML| is preferred. ฿-->| is the preferred extension. If the reader creates this YAML file, fix every instance of the filename in every topic as part of your commit. Files with the <!--฿ |YAML| is preferred. ฿-->|.yml<!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->| extension downloaded from elsewhere are outside our control. ฿--><!--฿ |YAML| is preferred. ฿-->ty](http://docs.cloudfoundry.org/running/managing-cf/logging.html) in the `metron_agent` job of `cf-release`.

For users, <%= vars.app_runtime_abbr %> records an audit trail of all relevant API invocations of an app. The Cloud Foundry Command Line Interface (cf CLI) command `cf events` returns this information.


## <a id='recommendations'></a> Recommendations for running a secure deployment

To help run a secure deployment, <%= vars.company_name %> recommends:

* Configure UAA clients and users using a BOSH manifest. Limit and manage these clients and users as you would<!--฿ Re-phrase for present tense if possible. ฿--> any other kind of privileged account.

* Deploy within a VLAN that limits network traffic to individual VMs. This reduces the possibility of unauthorized access to the VMs within your BOSH-managed cloud.

* Enable HTTPS for apps and SSL database connections to protect sensitive data transmitted to and from apps.

* Ensure that the jumpbox is secure, along with<!--฿ Do not use as a conjunction. Whenever possible, use |with| or |and| instead. ฿--> the load balancer and NAT VM.

* Encrypt stored files and data within databases to meet your data security requirements. Deploy using industry standard encryption and the best practices for your language or framework.

* Prohibit promiscuous network interfaces on the trusted network.

* Review and monitor data sharing and security practices with third-party services that you use to provide additional functionality<!--฿ |function|, |features|, or |capability| is preferred. ฿--> to your app.

* Store SSH keys securely to prevent disclosure, and promptly replace lost or compromised keys.

* Use <%= vars.app_runtime_abbr %>'s RBAC model to restrict your users' access to only what is necessary to<!--฿ Consider deleting this or replacing it with the shorter |you must|. ฿--> complete their tasks.

* Use a strong passphrase for both your <%= vars.app_runtime_abbr %> user account and SSH keys.

* <%= vars.ipsec_note %>

<%= vars.compliance_links %>


## <a id='apps-services'></a> Security for apps and services

This section links to topics that describe how <%= vars.app_runtime_abbr %> and <%= vars.app_runtime_abbr %> users manage security for apps and service instances.

* [App Security Groups](../concepts/asg.html): Describes how App Security Groups (ASGs) work and how to manage them in <%= vars.app_runtime_abbr %>.

<%= vars.app_svc_links %>

* [Trusted System Certificates](../devguide/deploy-apps/trusted-system-certificates.html): Explains where apps can find trusted system certificates.

* [Managing Access to Service Plans](../services/access-control.html): Describes how to enable or disable<!--฿ |deactivate| is preferred if it does not clash with the UI or other docs. ฿--> access to service plans for a subset of users.

* [Delivering Service Credentials to an App](../devguide/services/application-binding.html): Describes how to bind apps to service instances, which generate the credentials that enable the apps to use the service.

* [Managing Service Keys](../devguide/services/service-keys.html)<!--฿ If this file is a partial, do not use relative links. ฿-->: Explains how to create and manage service keys that enable apps to use service instances.
